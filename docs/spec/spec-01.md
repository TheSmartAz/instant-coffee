# Instant Coffee - 产品需求规格说明书 (Spec v0.1)

**项目名称**: Instant Coffee (速溶咖啡)
**版本**: v0.1 - 核心功能验证版
**日期**: 2025-01-30
**文档类型**: Product Specification Document (PSD)

---

## 文档变更历史

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|---------|------|
| v0.1 | 2025-01-30 | 初始版本，基于需求访谈创建 | Interview |

---

## 目录

1. [产品概述](#1-产品概述)
2. [核心设计原则](#2-核心设计原则)
3. [用户场景](#3-用户场景)
4. [功能需求](#4-功能需求)
5. [交互设计](#5-交互设计)
6. [技术约束](#6-技术约束)
7. [性能指标](#7-性能指标)
8. [未来规划](#8-未来规划)

---

## 1. 产品概述

### 1.1 产品定位

**Instant Coffee** 是一个通过命令行对话生成移动端优化页面的 AI 工具。

**核心理念**:
- ☕ 像速溶咖啡一样快速 - 通过对话快速生成页面
- 📱 移动端优先 - 9:19.5 比例完美适配
- 💬 对话式创造 - 自然语言交互，无需技术背景
- 🎯 双模式支持 - 既能快速生成，也能深度定制

### 1.2 目标用户

- **主要用户**: 需要快速创建移动端页面的非技术人员
- **使用场景**:
  - 灵感突发，快速记录想法并生成原型
  - 有明确需求，认真制作高质量页面

### 1.3 核心价值主张

| 传统方式 | Instant Coffee |
|---------|----------------|
| 学习编程 → 写代码 → 调试 | 对话描述 → 快速生成 |
| 需要技术背景 | 零技术门槛 |
| 只能在电脑前工作 | 命令行随时可用 |
| 英文界面 | 中文原生支持 |

---

## 2. 核心设计原则

### 2.1 场景支持原则

**支持双模式使用场景**:

1. **快速模式**: 灵感突发时快速记录
   - 最少提问，快速生成
   - 允许后续迭代优化

2. **深度模式**: 有明确需求时认真制作
   - 充分理解需求细节
   - 高质量一次性生成

**实现方式**: Interview Agent 根据用户输入信息量自适应调整提问深度

### 2.2 对话深度原则

**适度提问策略** (3-5 轮):
- 每轮最多 3 个问题
- 问题形式: 单选/多选/文字输入
- 根据用户提供的信息量动态调整提问深度
- 信息充分时减少提问，信息不足时适当追问

### 2.3 移动端优先原则

**完美的移动端体验**:
- 生成的页面仅针对移动端优化 (9:19.5 比例)
- 桌面端显示为次要考虑
- 所有生成的页面必须符合移动端最佳实践

### 2.4 透明度原则

**成本透明但不打扰**:
- Token 消耗仅在统计页面显示
- 对话过程中不显示成本信息，保持流畅体验
- 用户可通过 `instant-coffee stats` 查看详细统计

---

## 3. 用户场景

### 3.1 场景 A: 灵感突发，快速记录

**用户**: Alex (内容创作者, 26岁)
**场景**: 在咖啡馆突然想到一个作品集页面的创意

```bash
$ instant-coffee chat

☕ Instant Coffee - 快速生成移动端页面
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

你: 帮我做一个作品集展示页面

AI: 好的！我来帮你做一个作品集展示页面 ✨

    为了更好地呈现你的作品，我想了解几个细节：

    1️⃣ 作品类型是什么？
       📸 摄影作品
       🎨 设计作品
       ✍️ 文字作品
       📝 其他 (请告诉我)

    2️⃣ 大概有多少件作品要展示？
       💡 提示: 这会影响页面布局方式

    3️⃣ 希望页面风格是怎样的？
       🎯 简约现代
       🌈 色彩丰富
       🖤 黑白经典
       ✨ 随便，你帮我选

你: 摄影作品，大概20张，简约现代

AI: 明白了！我会为你生成一个简约现代风格的摄影作品集页面。

    开始生成...

    ━━━━━━━━━━━━━━━━ 30%
    ✅ 页面结构已生成 (瀑布流布局)

    ━━━━━━━━━━━━━━━━ 60%
    ✅ 样式已应用 (简约现代风格)

    ━━━━━━━━━━━━━━━━ 100%
    ✅ 移动端适配已优化

    生成完成！
    📂 预览: file:///Users/alex/instant-coffee-output/index.html

    (自动打开浏览器预览)

你: 👍 很好！能把图片间距改大一点吗？

AI: 好的，正在调整图片间距...

    ✅ 修改完成！刷新浏览器查看
```

**场景特点**:
- 用户提供的信息相对完整
- AI 只问了 3 个关键问题
- 快速生成并支持迭代

### 3.2 场景 B: 明确需求，认真制作

**用户**: 王强 (活动组织者, 35岁)
**场景**: 需要为公司年会制作专业的报名页面

```bash
$ instant-coffee chat

☕ Instant Coffee - 快速生成移动端页面
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

你: 帮我做一个公司年会报名页面

AI: 好的！我来帮你做一个年会报名页面 🎉

    为了制作一个专业的报名页面，我需要了解一些细节：

    1️⃣ 活动的基本信息
       • 活动名称是什么？
       • 活动时间和地点？

    2️⃣ 需要收集哪些信息？
       ✅ 姓名
       ✅ 部门/职位
       ✅ 手机号
       ✅ 邮箱
       ✅ 是否带家属
       ✅ 特殊需求 (素食/过敏等)

       (可以告诉我需要或不需要的)

    3️⃣ 活动有人数限制吗？需要显示剩余名额吗？

你: 活动名称是"2025科技公司年会"，2月15日晚6点，在市中心大酒店。
    需要收集姓名、部门、手机号、是否带家属、餐饮要求。
    限制200人，需要显示剩余名额。

AI: 非常清楚！让我确认一下收集到的信息：

    📋 活动信息
       • 名称: 2025科技公司年会
       • 时间: 2025年2月15日 18:00
       • 地点: 市中心大酒店

    📝 收集信息
       • 姓名
       • 部门
       • 手机号
       • 是否带家属
       • 餐饮要求 (素食/清真/过敏信息)

    👥 人数限制
       • 总名额: 200人
       • 实时显示剩余名额

    还有什么需要补充的吗？如果没有，我就开始生成了 🚀

你: 没有了，开始吧

AI: 好的！开始生成专业的年会报名页面...

    ━━━━━━━━━━━━━━━━ 20%
    ✅ 页面结构已生成 (头部+表单+底部)

    ━━━━━━━━━━━━━━━━ 40%
    ✅ 活动信息卡片已创建

    ━━━━━━━━━━━━━━━━ 60%
    ✅ 报名表单已生成 (包含验证逻辑)

    ━━━━━━━━━━━━━━━━ 80%
    ✅ 剩余名额实时显示功能已添加

    ━━━━━━━━━━━━━━━━ 100%
    ✅ 移动端适配和样式优化完成

    生成完成！
    📂 预览: file:///Users/wangqiang/instant-coffee-output/index.html

    你可以先预览，然后告诉我需要调整的地方 😊
```

**场景特点**:
- 用户提供了详细信息
- AI 通过 2 轮对话充分理解需求
- 生成更复杂的页面，包含动态功能

---

## 4. 功能需求

### 4.1 核心功能矩阵

| 功能模块 | 优先级 | 状态 | 说明 |
|---------|--------|------|------|
| **对话式生成** | P0 | 必须实现 | 核心功能 |
| **Interview Agent** | P0 | 必须实现 | 3-5轮自适应提问 |
| **Generation Agent** | P0 | 必须实现 | 渐进式生成 + 移动端优化 |
| **Refinement Agent** | P0 | 必须实现 | 文字描述修改 |
| **自动重试机制** | P0 | 必须实现 | 失败自动重试2-3次 |
| **会话历史管理** | P0 | 必须实现 | 自动保存所有会话 |
| **版本历史回滚** | P0 | 必须实现 | 支持撤销/重做 |
| **导出代码** | P0 | 必须实现 | 导出完整HTML |
| **生成分享链接** | P1 | 后续实现 | 需要服务器支持 |
| **统计命令** | P1 | 后续实现 | 查看token消耗 |
| **模板系统** | P2 | 未来实现 | 待核心功能验证后 |

### 4.2 功能详细说明

#### 4.2.1 对话式生成 (P0)

**功能描述**:
用户通过命令行与 AI 对话，描述想要的页面，AI 通过提问澄清需求后生成页面。

**输入**:
- 用户的自然语言描述 (文字输入)
- 用户对 AI 问题的回答

**输出**:
- 移动端优化的 HTML 页面
- 自动在浏览器中预览

**关键需求**:
- 必须支持中文输入和对话
- AI 必须使用日常语言，不使用技术术语
- 对话应该像和朋友聊天一样自然

#### 4.2.2 Interview Agent (P0)

**功能描述**:
通过自适应提问理解用户需求，提问深度根据用户提供的信息量动态调整。

**提问策略**:
```
用户信息充分度评估:
├── 非常充分 (90%+) → 0-1轮提问 → 快速生成
├── 较充分 (70-90%) → 2-3轮提问 → 补充细节
├── 一般 (50-70%) → 3-4轮提问 → 深入理解
└── 不充分 (<50%) → 4-5轮提问 → 全面澄清
```

**提问形式**:
- 每轮最多 3 个问题
- 支持单选题 (提供选项)
- 支持多选题 (可选多个)
- 支持开放式文字输入
- 使用 Emoji 增加亲和力

**示例对话模板**:
```
AI: 好的！我来帮你做一个[页面类型] ✨

    为了更好地完成这个页面，我想了解几个细节：

    1️⃣ [第一个问题]
       [选项A]
       [选项B]
       [选项C]

    2️⃣ [第二个问题]
       💡 提示: [额外说明]

    3️⃣ [第三个问题]

    你可以直接告诉我，或者点选这些选项 😊
```

**终止条件**:
- 收集到足够的信息可以生成页面
- 超过 5 轮仍未收集到足够信息，提示用户提供更多细节

#### 4.2.3 Generation Agent (P0)

**功能描述**:
根据 Interview Agent 收集的信息生成移动端优化的 HTML 页面。

**生成方式**: **渐进式生成** (边思考边生成)

```
生成过程可视化:

━━━━━━━━━━━━━━━━ 20%
✅ 页面结构已生成

━━━━━━━━━━━━━━━━ 40%
✅ 核心内容已添加

━━━━━━━━━━━━━━━━ 60%
✅ 样式已应用

━━━━━━━━━━━━━━━━ 80%
✅ 交互逻辑已添加

━━━━━━━━━━━━━━━━ 100%
✅ 移动端适配已优化
```

**输出规范**:

1. **移动端适配要求** (必须遵守):
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>{页面标题}</title>
    <style>
        /* 移动端重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        /* 移动端容器 */
        .container {
            max-width: 430px;        /* iPhone Pro Max 宽度 */
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        /* 隐藏滚动条但保留滚动功能 */
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        /* 触摸优化 */
        button, a, input, textarea {
            touch-action: manipulation;
        }

        /* 其他样式... */
    </style>
</head>
<body>
    <div class="container">
        <!-- 页面内容 -->
    </div>

    <script>
        // 交互逻辑
    </script>
</body>
</html>
```

2. **技术要求**:
   - 单文件 HTML (CSS 和 JS 内联)
   - 无外部依赖 (除 Google Fonts)
   - 视口比例: 9:19.5
   - 最大宽度: 430px
   - 触摸按钮最小高度: 44px
   - 字体大小: 正文 16px, 标题 24-32px

3. **质量标准**:
   - 页面必须在手机浏览器中完美显示
   - 滚动条必须隐藏 (使用 `.hide-scrollbar`)
   - 所有交互元素必须易于触摸操作
   - 图片必须响应式 (max-width: 100%)

#### 4.2.4 Refinement Agent (P0)

**功能描述**:
根据用户的文字反馈修改已生成的页面。

**支持的修改方式**:
1. **文字描述修改** (P0)
   - 示例: "把标题改成红色"
   - 示例: "把按钮变大一点"
   - 示例: "添加一个logo"

2. **版本历史和回滚** (P0)
   - 每次修改自动保存为新版本
   - 支持查看历史版本
   - 支持回滚到任意版本
   - 命令: `instant-coffee history` 查看版本列表

**修改流程**:
```
用户: [修改描述]
  ↓
AI 理解修改意图
  ↓
生成修改后的页面
  ↓
保存为新版本
  ↓
提示用户刷新预览
```

**版本管理**:
```bash
# 查看当前会话的历史版本
$ instant-coffee history

会话 abc123 的版本历史:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
v1 (当前版本)  2025-01-30 14:23
   修改: 调整了按钮大小

v0 (初始版本)  2025-01-30 14:15
   生成: 活动报名页面

# 回滚到指定版本
$ instant-coffee rollback abc123 v0
✅ 已回滚到版本 v0
📂 预览: file:///.../index.html
```

#### 4.2.5 自动重试机制 (P0)

**功能描述**:
当 AI 生成失败时，自动重试 2-3 次，失败后提示用户。

**重试策略**:
```
生成失败
  ↓
自动重试 (第1次)
  ↓
失败 → 自动重试 (第2次)
  ↓
失败 → 自动重试 (第3次)
  ↓
失败 → 提示用户重新描述需求
```

**用户体验**:
```bash
AI: 开始生成...

    ━━━━━━━━━━━━━━━━ 30%
    ✅ 页面结构已生成

    ⚠️ 生成遇到问题，正在重试 (1/3)...

    ━━━━━━━━━━━━━━━━ 30%
    ✅ 重试成功，继续生成...

    ━━━━━━━━━━━━━━━━ 100%
    ✅ 生成完成！
```

**失败处理**:
- 3 次重试后仍失败，提示用户
- 保存当前会话状态
- 建议用户调整需求描述或简化功能

#### 4.2.6 会话历史管理 (P0)

**功能描述**:
自动保存所有会话，用户可以查看和继续历史会话。

**存储策略**:
- 每次对话自动保存为会话
- 本地存储 (SQLite)
- 包含完整对话历史和生成的页面

**命令**:
```bash
# 查看所有会话
$ instant-coffee history

最近的会话:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. [abc123] 活动报名页面  2025-01-30 14:15
   最后修改: 2025-01-30 14:23

2. [def456] 个人作品集    2025-01-30 10:30
   最后修改: 2025-01-30 10:45

3. [ghi789] 产品介绍页    2025-01-29 16:20
   最后修改: 2025-01-29 16:35

# 继续某个会话
$ instant-coffee chat --continue abc123

☕ 继续会话: 活动报名页面
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

已加载之前的页面，你可以继续修改或优化 😊

你: [继续对话]
```

**数据结构**:
```python
Session {
    id: str              # 会话 ID
    title: str           # 会话标题 (自动生成或用户指定)
    created_at: datetime
    updated_at: datetime
    messages: List[Message]
    versions: List[Version]
    current_version: int
}

Message {
    role: "user" | "assistant"
    content: str
    timestamp: datetime
}

Version {
    version: int
    html: str
    created_at: datetime
    description: str  # 版本描述 (例如: "初始生成", "调整按钮大小")
}
```

#### 4.2.7 导出代码 (P0)

**功能描述**:
导出完整的 HTML 代码包，用户可以部署到任何服务器。

**命令**:
```bash
# 导出当前会话的最新版本
$ instant-coffee export --output ./my-page

✅ 已导出到: ./my-page/
   ├── index.html

# 导出指定会话的指定版本
$ instant-coffee export abc123 --version v1 --output ./my-page

✅ 已导出到: ./my-page/
   ├── index.html
```

**导出内容**:
- 单个 HTML 文件 (包含所有 CSS 和 JS)
- 如果有外部资源 (图片等)，生成说明文件

#### 4.2.8 统计命令 (P1)

**功能描述**:
查看 Token 消耗统计，但不在对话过程中打断用户。

**命令**:
```bash
$ instant-coffee stats

📊 Token 使用统计
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

今日消耗:
  Tokens: 3,456
  成本: $0.0086

本周消耗:
  Tokens: 12,345
  成本: $0.0309

总计消耗:
  Tokens: 45,678
  成本: $0.1142

会话统计:
  总会话数: 23
  生成页面: 18

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# 查看指定会话的消耗
$ instant-coffee stats abc123

会话 abc123 的 Token 消耗:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  总消耗: 1,234 tokens ($0.0031)

  Interview: 456 tokens
  Generation: 678 tokens
  Refinement: 100 tokens
```

---

## 5. 交互设计

### 5.1 CLI 命令结构

```bash
# 主命令
instant-coffee <command> [options]

# 可用命令:
  chat            启动对话模式
  history         查看会话历史
  export          导出代码
  stats           查看统计信息
  rollback        回滚版本
  clean           清理缓存
  help            显示帮助
```

### 5.2 对话流程设计

```
启动 CLI
  ↓
欢迎界面
  ↓
用户输入需求
  ↓
Interview Agent 提问
  ↓
用户回答
  ↓
[重复 2-4 次]
  ↓
Generation Agent 生成
  ↓
显示进度 (渐进式)
  ↓
生成完成，自动打开预览
  ↓
用户反馈
  ↓
Refinement Agent 修改
  ↓
[循环优化]
```

### 5.3 错误处理流程

```
错误发生
  ↓
自动重试 (1/3)
  ↓
失败 → 重试 (2/3)
  ↓
失败 → 重试 (3/3)
  ↓
失败 → 显示错误信息
  ↓
提示用户:
  1. 重新描述需求
  2. 简化功能
  3. 查看日志
  4. 报告问题
```

### 5.4 视觉设计

**CLI 输出样式**:
```
☕ [品牌标识]
━━━━━━━━━━━━━━━━ [分隔线]
✅ [成功状态]
⚠️ [警告状态]
❌ [错误状态]
📂 [文件路径]
💡 [提示信息]
🎯 [选项]
✨ [特殊状态]
```

**颜色方案**:
- 主要信息: 蓝色 (cyan)
- 成功: 绿色 (green)
- 警告: 黄色 (yellow)
- 错误: 红色 (red)
- 提示: 灰色 (gray)

---

## 6. 技术约束

### 6.1 技术栈

**前端 (CLI)**:
- 语言: TypeScript
- 框架: Node.js
- 依赖:
  - commander: 命令行解析
  - chalk: 彩色输出
  - ora: 加载动画
  - inquirer: 交互式输入
  - axios: HTTP 请求
  - open: 自动打开浏览器

**后端 (API)**:
- 语言: Python 3.11+
- 框架: FastAPI
- AI: Claude API (claude-sonnet-4-20250514)
- 数据库: SQLite
- 依赖:
  - anthropic: Claude API SDK
  - pydantic: 数据验证
  - sqlalchemy: ORM
  - python-dotenv: 环境变量

### 6.2 系统要求

**CLI 运行环境**:
- Node.js 18.0+
- Python 3.11+
- 操作系统: macOS / Linux / Windows

**API 密钥**:
- 需要 Anthropic API Key
- 通过 `.env` 文件配置

### 6.3 数据存储

**本地存储为主**:
- 所有数据存储在用户本地
- 数据库文件: `~/.instant-coffee/instant-coffee.db`
- 输出文件: `~/instant-coffee-output/`
- 不依赖云端服务器
- 用户完全掌控数据

**数据库表结构**:
```sql
-- 会话表
CREATE TABLE sessions (
    id TEXT PRIMARY KEY,
    title TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    current_version INTEGER DEFAULT 0
);

-- 消息表
CREATE TABLE messages (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id TEXT NOT NULL,
    role TEXT NOT NULL,  -- 'user' or 'assistant'
    content TEXT NOT NULL,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (session_id) REFERENCES sessions(id)
);

-- 版本表
CREATE TABLE versions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id TEXT NOT NULL,
    version INTEGER NOT NULL,
    html TEXT NOT NULL,
    description TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (session_id) REFERENCES sessions(id)
);

-- Token 使用表
CREATE TABLE token_usage (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id TEXT NOT NULL,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    agent_type TEXT NOT NULL,  -- 'interview', 'generation', 'refinement'
    model TEXT NOT NULL,
    input_tokens INTEGER NOT NULL,
    output_tokens INTEGER NOT NULL,
    total_tokens INTEGER NOT NULL,
    cost_usd REAL NOT NULL,
    FOREIGN KEY (session_id) REFERENCES sessions(id)
);
```

---

## 7. 性能指标

### 7.1 响应时间

| 操作 | 目标时间 | 说明 |
|------|---------|------|
| CLI 启动 | < 1秒 | 命令行启动时间 |
| Interview 响应 | < 5秒 | AI 提问响应时间 |
| Generation 完成 | < 30秒 | 简单页面生成时间 |
| Generation 完成 | < 60秒 | 复杂页面生成时间 |
| Refinement 响应 | < 15秒 | 修改响应时间 |
| 浏览器打开 | < 2秒 | 自动打开预览 |

### 7.2 质量指标

| 指标 | 目标 | 说明 |
|------|------|------|
| 生成成功率 | > 95% | 首次生成成功率 |
| 移动端适配率 | 100% | 所有生成页面必须适配 |
| 用户满意度 | > 4.0/5.0 | 生成结果满意度 |
| Interview 轮次 | 3-5轮 | 平均提问轮次 |
| Token 效率 | < 500 tokens | 单页面平均消耗 |

### 7.3 可用性指标

| 指标 | 目标 | 说明 |
|------|------|------|
| API 可用性 | > 99% | 服务可用时间 |
| 错误恢复率 | > 90% | 自动重试成功率 |
| 数据完整性 | 100% | 会话数据不丢失 |

---

## 8. 未来规划

### 8.1 Phase 2: 模板系统 (未来)

**等待时机**:
- 核心功能验证完成后
- 收集足够的用户生成案例后

**计划功能**:
```
4 大模板类别:
1. 个人主页
   - 作品集展示
   - 个人博客
   - 简历页面

2. 活动页面
   - 活动报名
   - 邀请函
   - 线下聚会

3. 商业落地页
   - 产品介绍
   - 服务说明
   - 价格套餐

4. 工具页面
   - 数据收集
   - 反馈表单
   - 投票页面
```

**使用方式**:
- 用户可选择模板作为起点
- 通过对话进一步定制
- 模板不是必须的，可直接对话生成

### 8.2 Phase 3: 分享链接 (未来)

**功能描述**:
生成可分享的在线链接，无需用户自己部署。

**需要的基础设施**:
- 文件托管服务器
- 短链接服务
- 访问统计 (可选)

**命令设计**:
```bash
$ instant-coffee share

生成分享链接...

✅ 分享链接已生成:
   https://instant-coffee.app/p/abc123

   📊 访问统计: 已启用
   🔗 二维码: (显示二维码)

   你可以将这个链接分享给任何人 😊
```

### 8.3 Phase 4: 高级功能 (未来)

**可能的功能**:
- 语音输入支持
- 多页面生成
- 自定义域名
- 协作编辑
- 云端同步 (可选)

---

## 附录

### A. Interview Agent 提示词模板

```
你是 Instant Coffee 的 Interview Agent，负责通过对话了解用户需求。

你的任务是：
1. 分析用户的输入，判断信息充分度 (0-100%)
2. 根据信息充分度决定提问深度:
   - 90%+ → 0-1轮提问
   - 70-90% → 2-3轮提问
   - 50-70% → 3-4轮提问
   - <50% → 4-5轮提问
3. 每轮最多问 3 个问题
4. 问题要具体、易于回答
5. 提供单选/多选选项 + 文字输入

提问形式:
1️⃣ [问题1]
   [选项A]
   [选项B]
   💡 提示: [额外说明]

2️⃣ [问题2]

3️⃣ [问题3]

你应该:
- 使用友好、日常的语言
- 用 Emoji 让对话更有亲和力 ✨
- 不使用技术术语
- 信息充分时果断结束提问

输出格式:
{
  "message": "展示给用户的问题",
  "is_complete": true/false,
  "confidence": 0.0-1.0,
  "context": {收集到的信息}
}
```

### B. Generation Agent 提示词模板

```
你是 Instant Coffee 的 Generation Agent，负责生成移动端优化的 HTML 页面。

移动端设计要求（必须遵守）:
1. 视口比例：9:19.5
2. 最大宽度：430px (iPhone Pro Max)
3. 隐藏滚动条：使用 .hide-scrollbar 类
4. 触摸优化：按钮最小高度 44px
5. 字体大小：正文 16px，标题 24-32px
6. 间距：使用 8px 网格系统

技术要求:
- 单文件 HTML (CSS 和 JS 内联)
- 无外部依赖 (除 Google Fonts)
- 使用现代 CSS (Flexbox/Grid)
- 图片响应式 (max-width: 100%)

生成方式:
采用渐进式生成，分阶段输出:
1. 页面结构 (20%)
2. 核心内容 (40%)
3. 样式应用 (60%)
4. 交互逻辑 (80%)
5. 移动端优化 (100%)

输出格式:
直接输出完整的 HTML 代码，不要任何解释。
```

### C. Refinement Agent 提示词模板

```
你是 Instant Coffee 的 Refinement Agent，负责根据用户反馈修改页面。

你的任务是：
1. 理解用户的修改意图
2. 定位需要修改的部分
3. 生成修改后的完整 HTML
4. 保持移动端适配标准

修改原则:
- 只修改用户提到的部分
- 不随意改动其他内容
- 保持代码质量和可读性
- 确保修改后仍符合移动端标准

支持的修改类型:
- 样式调整 (颜色、大小、间距等)
- 内容修改 (文字、图片、链接等)
- 布局调整 (位置、对齐等)
- 功能添加 (按钮、表单等)

输出格式:
直接输出修改后的完整 HTML 代码，不要任何解释。
```

---

**文档版本**: v0.1
**最后更新**: 2025-01-30
**状态**: 已完成初始版本

---

## 总结

本规格说明书定义了 **Instant Coffee v0.1** 的核心功能和实现细节：

**核心特性**:
1. ✅ 双模式支持 - 快速生成 + 深度定制
2. ✅ 自适应提问 - 3-5轮智能提问
3. ✅ 移动端优先 - 9:19.5 完美适配
4. ✅ 渐进式生成 - 展示生成过程
5. ✅ 版本管理 - 自动保存和回滚
6. ✅ 本地存储 - 用户完全掌控数据
7. ✅ 成本透明 - 统计页面查看消耗

**设计理念**:
- 像速溶咖啡一样快速方便
- 像和朋友聊天一样自然
- 专注移动端，做到极致
- 先验证核心功能，再扩展

**下一步**: 开始技术架构设计和原型开发

# Instant Coffee - äº§å“éœ€æ±‚è§„æ ¼è¯´æ˜ä¹¦ (Spec v0.2)

**é¡¹ç›®åç§°**: Instant Coffee (é€Ÿæº¶å’–å•¡)
**ç‰ˆæœ¬**: v0.2 - Web å‰ç«¯ + å¤š Agent å¹¶è¡Œæ‰§è¡Œ
**æ—¥æœŸ**: 2025-01-30
**æ–‡æ¡£ç±»å‹**: Product Specification Document (PSD)

---

## æ–‡æ¡£å˜æ›´å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ | ä½œè€… |
|------|------|---------|------|
| v0.1 | 2025-01-30 | åˆå§‹ç‰ˆæœ¬ï¼ŒCLI + åç«¯æ ¸å¿ƒåŠŸèƒ½ | Interview |
| v0.2 | 2025-01-30 | Web å‰ç«¯ + æ‰§è¡Œæµå¯è§†åŒ– + Planner | Planning |

---

## ç›®å½•

1. [ç‰ˆæœ¬æ¦‚è¿°](#1-ç‰ˆæœ¬æ¦‚è¿°)
2. [æ ¸å¿ƒè®¾è®¡åŸåˆ™](#2-æ ¸å¿ƒè®¾è®¡åŸåˆ™)
3. [ç”¨æˆ·åœºæ™¯](#3-ç”¨æˆ·åœºæ™¯)
4. [åŠŸèƒ½éœ€æ±‚](#4-åŠŸèƒ½éœ€æ±‚)
5. [äº¤äº’è®¾è®¡](#5-äº¤äº’è®¾è®¡)
6. [æŠ€æœ¯çº¦æŸ](#6-æŠ€æœ¯çº¦æŸ)
7. [äº‹ä»¶åè®®](#7-äº‹ä»¶åè®®)
8. [æ€§èƒ½æŒ‡æ ‡](#8-æ€§èƒ½æŒ‡æ ‡)
9. [æœªæ¥è§„åˆ’](#9-æœªæ¥è§„åˆ’)

---

## 1. ç‰ˆæœ¬æ¦‚è¿°

### 1.1 ç‰ˆæœ¬å®šä½

**Spec v0.2** åœ¨ v0.1 (CLI + åç«¯) åŸºç¡€ä¸Šï¼Œå¢åŠ  **Web å‰ç«¯** å’Œ **å¤š Agent å¹¶è¡Œæ‰§è¡Œ** èƒ½åŠ›ã€‚

**æ ¸å¿ƒå‡çº§**:
- ğŸŒ Web å‰ç«¯ - ä¸ä¾èµ– CLIï¼Œæµè§ˆå™¨ç›´æ¥ä½¿ç”¨
- ğŸ‘ï¸ æ‰§è¡Œæµå¯è§†åŒ– - å®æ—¶çœ‹è§ AI åœ¨åšä»€ä¹ˆ
- ğŸ“‹ Planner + Todo - é€æ˜çš„ä»»åŠ¡è§„åˆ’å’Œè¿›åº¦è¿½è¸ª
- âš¡ å¤š Agent å¹¶è¡Œ - æœ€å¤š 5 ä¸ª Agent åŒæ—¶æ‰§è¡Œ

### 1.2 ä¸ v0.1 çš„å…³ç³»

| v0.1 (å·²å®Œæˆ) | v0.2 (æœ¬ç‰ˆæœ¬) |
|--------------|--------------|
| CLI å‘½ä»¤è¡Œäº¤äº’ | Web æµè§ˆå™¨äº¤äº’ |
| çº¿æ€§æ‰§è¡Œ (Interview â†’ Generation â†’ Refinement) | å¹¶è¡Œæ‰§è¡Œ (å¤š Agent åŒæ—¶è¿è¡Œ) |
| ç®€å•è¿›åº¦æ¡ | ç»†ç²’åº¦æ‰§è¡Œæµ + Todo é¢æ¿ |
| å•é¡µé¢ç”Ÿæˆ | å¤šé¡µé¢å¹¶è¡Œç”Ÿæˆ |
| å›ºå®š Agent æµç¨‹ | AI Planner åŠ¨æ€è§„åˆ’ |

### 1.3 æ ¸å¿ƒä»·å€¼ä¸»å¼ 

| ç—›ç‚¹ | v0.2 è§£å†³æ–¹æ¡ˆ |
|------|--------------|
| ä¸çŸ¥é“ AI åœ¨åšä»€ä¹ˆ | å®æ—¶æ‰§è¡Œæµï¼Œæ¯ä¸€æ­¥éƒ½å¯è§ |
| ä¸çŸ¥é“è¿˜è¦ç­‰å¤šä¹… | Todo é¢æ¿æ˜¾ç¤ºå®Œæˆè¿›åº¦ |
| å¤æ‚éœ€æ±‚æ•ˆç‡ä½ | å¤š Agent å¹¶è¡Œï¼Œæå‡æ•ˆç‡ |
| éœ€è¦å®‰è£… CLI | Web ç›´æ¥è®¿é—®ï¼Œé›¶å®‰è£… |

---

## 2. æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 2.1 é€æ˜åº¦åŸåˆ™

**"çœ‹è§ AI åœ¨åšäº‹"**:
- æ¯ä¸ª Agent çš„å¯åŠ¨ã€è¿›åº¦ã€å®Œæˆéƒ½å®æ—¶å±•ç¤º
- æ¯ä¸ª Tool è°ƒç”¨éƒ½æœ‰è®°å½•
- ç”¨æˆ·éšæ—¶çŸ¥é“å½“å‰çŠ¶æ€

### 2.2 å¹¶è¡Œæ‰§è¡ŒåŸåˆ™

**"èƒ½å¹¶è¡Œå°±å¹¶è¡Œ"**:
- Planner åˆ†æä»»åŠ¡ä¾èµ–å…³ç³»
- æ— ä¾èµ–çš„ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ
- æœ€å¤š 5 ä¸ª Agent åŒæ—¶è¿è¡Œ
- èµ„æºåˆ©ç”¨æœ€å¤§åŒ–

### 2.3 å¤±è´¥å®¹é”™åŸåˆ™

**"ä¸€ä¸ªå¤±è´¥ä¸å½±å“å…¨å±€"**:
- ä¸´æ—¶é”™è¯¯è‡ªåŠ¨é‡è¯•
- å•ä¸ª Task å¤±è´¥ä¸é˜»å¡æ— å…³ Task
- ç”¨æˆ·å¯é€‰æ‹©é‡è¯•ã€è·³è¿‡æˆ–ç»ˆæ­¢
- ä¿ç•™å·²å®Œæˆçš„å·¥ä½œæˆæœ

### 2.4 æ¸è¿›å¢å¼ºåŸåˆ™

**"å…ˆèƒ½ç”¨ï¼Œå†å¥½ç”¨"**:
- é˜¶æ®µ 1: åŸºç¡€æ‰§è¡Œæµå¯è§†åŒ–
- é˜¶æ®µ 2: Planner + Todo é¢æ¿
- åç»­: æ›´å¤šé«˜çº§åŠŸèƒ½

---

## 3. ç”¨æˆ·åœºæ™¯

### 3.1 åœºæ™¯ A: å•é¡µé¢ç”Ÿæˆ (åŸºç¡€åœºæ™¯)

**ç”¨æˆ·**: å°æ˜ (äº§å“ç»ç†)
**åœºæ™¯**: éœ€è¦å¿«é€Ÿç”Ÿæˆä¸€ä¸ªæ´»åŠ¨æŠ¥åé¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ Plan: ç”Ÿæˆæ´»åŠ¨æŠ¥åé¡µé¢                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Todo:                      æ‰§è¡Œæµ:                         â”‚
â”‚  â˜‘ åˆ†æéœ€æ±‚                 âœ“ åˆ†æéœ€æ±‚å®Œæˆ (2s)             â”‚
â”‚  â˜‘ æ”¶é›†è¯¦ç»†ä¿¡æ¯             âœ“ Interview: æ”¶é›†äº†5ä¸ªä¿¡æ¯      â”‚
â”‚  â–¶ ç”Ÿæˆé¡µé¢ç»“æ„             â–¶ Generation: æ­£åœ¨ç”Ÿæˆ... 40%   â”‚
â”‚  â˜ æ·»åŠ æ ·å¼                   â””â”€ tool: filesystem.write    â”‚
â”‚  â˜ æ·»åŠ äº¤äº’é€»è¾‘                                             â”‚
â”‚  â˜ å¯¼å‡ºæ–‡ä»¶                                                 â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [è¾“å…¥æ¡†: å¸®æˆ‘åšä¸€ä¸ªå…¬å¸å¹´ä¼šæŠ¥åé¡µé¢...]        [å‘é€]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åœºæ™¯ç‰¹ç‚¹**:
- å•é¡µé¢ï¼Œçº¿æ€§æ‰§è¡Œ
- Todo é€ä¸ªå®Œæˆ
- æ‰§è¡Œæµå®æ—¶æ›´æ–°

### 3.2 åœºæ™¯ B: å¤šé¡µé¢å¹¶è¡Œç”Ÿæˆ (é«˜çº§åœºæ™¯)

**ç”¨æˆ·**: å¼ æ€» (åˆ›ä¸šè€…)
**åœºæ™¯**: éœ€è¦åŒæ—¶ç”Ÿæˆç”µå•†é¦–é¡µã€å•†å“è¯¦æƒ…é¡µã€è´­ç‰©è½¦é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ Plan: ç”Ÿæˆç”µå•†ç½‘ç«™ (3ä¸ªé¡µé¢)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Task 1: ç”Ÿæˆé¦–é¡µ                              [â–¶ 60%]   â”‚â”‚
â”‚  â”‚ â”œâ”€ ğŸ¤– Generation Agent #1                               â”‚â”‚
â”‚  â”‚ â”‚   â””â”€ æ­£åœ¨æ·»åŠ æ ·å¼...                                  â”‚â”‚
â”‚  â”‚ â””â”€ ğŸ”§ tool: filesystem.write                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Task 2: ç”Ÿæˆå•†å“è¯¦æƒ…é¡µ                        [â–¶ 40%]   â”‚â”‚
â”‚  â”‚ â”œâ”€ ğŸ¤– Generation Agent #2                               â”‚â”‚
â”‚  â”‚ â”‚   â””â”€ æ­£åœ¨ç”Ÿæˆé¡µé¢ç»“æ„...                              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Task 3: ç”Ÿæˆè´­ç‰©è½¦é¡µé¢                        [â–¶ 20%]   â”‚â”‚
â”‚  â”‚ â”œâ”€ ğŸ¤– Generation Agent #3                               â”‚â”‚
â”‚  â”‚ â”‚   â””â”€ æ­£åœ¨åˆ†æéœ€æ±‚...                                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Task 4: ç»Ÿä¸€æ ·å¼ä¼˜åŒ–                          [â¸ ç­‰å¾…]  â”‚â”‚
â”‚  â”‚ â””â”€ ä¾èµ–: Task 1, 2, 3 å®Œæˆåæ‰§è¡Œ                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [è¾“å…¥æ¡†...]                                      [å‘é€]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åœºæ™¯ç‰¹ç‚¹**:
- 3 ä¸ª Generation Agent å¹¶è¡Œè¿è¡Œ
- Task 4 ç­‰å¾…å‰ç½®ä»»åŠ¡å®Œæˆ
- æ¯ä¸ª Task ç‹¬ç«‹æ˜¾ç¤ºè¿›åº¦

### 3.3 åœºæ™¯ C: ä»»åŠ¡å¤±è´¥å¤„ç†

**ç”¨æˆ·**: æå·¥ (å¼€å‘è€…)
**åœºæ™¯**: ç”Ÿæˆè¿‡ç¨‹ä¸­æŸä¸ªä»»åŠ¡å¤±è´¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŒ Task 2: ç”Ÿæˆå•†å“è¯¦æƒ…é¡µ                        [å¤±è´¥]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é”™è¯¯: Generation Agent è¿”å›äº†æ— æ•ˆçš„ HTML æ ¼å¼               â”‚
â”‚  å·²é‡è¯• 3 æ¬¡                                                 â”‚
â”‚                                                             â”‚
â”‚  å—å½±å“çš„ä»»åŠ¡:                                               â”‚
â”‚    â¸ Task 4: ç»Ÿä¸€æ ·å¼ä¼˜åŒ–                                   â”‚
â”‚                                                             â”‚
â”‚  [ğŸ”„ é‡è¯•]  [â­ è·³è¿‡]  [âœï¸ ä¿®æ”¹éœ€æ±‚]  [ğŸ›‘ ç»ˆæ­¢å…¨éƒ¨]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åœºæ™¯ç‰¹ç‚¹**:
- Task 1, 3 ç»§ç»­æ‰§è¡Œä¸å—å½±å“
- Task 4 è¿›å…¥é˜»å¡çŠ¶æ€
- ç”¨æˆ·å¯é€‰æ‹©å¤„ç†æ–¹å¼

---

## 4. åŠŸèƒ½éœ€æ±‚

### 4.1 åŠŸèƒ½çŸ©é˜µ

| åŠŸèƒ½æ¨¡å— | é˜¶æ®µ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|---------|------|--------|------|
| **Web å‰ç«¯éª¨æ¶** | 1 | P0 | è¾“å…¥æ¡† + å‘é€æŒ‰é’® + è¾“å‡ºåŒºåŸŸ |
| **SSE äº‹ä»¶æ¶ˆè´¹** | 1 | P0 | æ¥å…¥åç«¯ SSEï¼Œå®æ—¶æ¥æ”¶äº‹ä»¶ |
| **æ‰§è¡Œæµåˆ—è¡¨** | 1 | P0 | äº‹ä»¶é€æ¡æ˜¾ç¤ºï¼Œè‡ªåŠ¨æ»šåŠ¨ |
| **çŠ¶æ€æ¸²æŸ“** | 1 | P0 | in_progress / done / error ä¸‰æ€ |
| **äº‹ä»¶æŠ˜å ** | 1 | P1 | å®Œæˆçš„äº‹ä»¶æŠ˜å æˆæ‘˜è¦ |
| **é”™è¯¯æç¤ºå¡** | 1 | P1 | ç½‘ç»œæ–­å¼€ã€500ã€è¶…æ—¶å¤„ç† |
| **Planner é€»è¾‘** | 2 | P0 | AI åˆ†æéœ€æ±‚ï¼Œç”Ÿæˆ Plan |
| **Todo é¢æ¿** | 2 | P0 | ä»»åŠ¡åˆ—è¡¨ï¼ŒçŠ¶æ€è”åŠ¨ |
| **Task å¡ç‰‡è§†å›¾** | 2 | P0 | æ¯ä¸ª Task ç‹¬ç«‹å¡ç‰‡ |
| **å¹¶è¡Œæ‰§è¡Œå¼•æ“** | 2 | P0 | æœ€å¤š 5 Agent å¹¶è¡Œ |
| **å¤±è´¥å¤„ç† UI** | 2 | P1 | é‡è¯•/è·³è¿‡/ä¿®æ”¹/ç»ˆæ­¢ |
| **å–æ¶ˆ/ä¸­æ­¢æŒ‰é’®** | 2 | P2 | ç”¨æˆ·ä¸»åŠ¨ç»ˆæ­¢æ‰§è¡Œ |

### 4.2 é˜¶æ®µ 1: æ‰§è¡Œæµå¯è§†åŒ–

#### 4.2.1 Web å‰ç«¯éª¨æ¶ (P0)

**åŠŸèƒ½æè¿°**:
åŸºç¡€çš„ Web åº”ç”¨ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥éœ€æ±‚å¹¶çœ‹åˆ°æ‰§è¡Œè¿‡ç¨‹ã€‚

**é¡µé¢ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜• Instant Coffee                              [æ–°ä¼šè¯]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                     æ‰§è¡Œæµè¾“å‡ºåŒºåŸŸ                           â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [è¾“å…¥æ¡†: æè¿°ä½ æƒ³è¦çš„é¡µé¢...]              [å‘é€]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®éœ€æ±‚**:
- å“åº”å¼å¸ƒå±€ï¼Œæ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯è®¿é—®
- è¾“å…¥æ¡†æ”¯æŒå¤šè¡Œæ–‡æœ¬
- å‘é€ä¸­ç¦ç”¨è¾“å…¥æ¡†å’ŒæŒ‰é’®
- æ”¯æŒ Enter å‘é€ï¼ŒShift+Enter æ¢è¡Œ

#### 4.2.2 SSE äº‹ä»¶æ¶ˆè´¹ (P0)

**åŠŸèƒ½æè¿°**:
å‰ç«¯é€šè¿‡ SSE æ¥æ”¶åç«¯æ¨é€çš„æ‰§è¡Œäº‹ä»¶ã€‚

**æŠ€æœ¯æ–¹æ¡ˆ**:
```javascript
const eventSource = new EventSource('/api/chat/stream?session_id=xxx');

eventSource.onmessage = (event) => {
  if (event.data === '[DONE]') {
    eventSource.close();
    return;
  }
  const data = JSON.parse(event.data);
  handleEvent(data);
};

eventSource.onerror = (error) => {
  // é”™è¯¯å¤„ç†
};
```

**å…³é”®éœ€æ±‚**:
- è‡ªåŠ¨é‡è¿æœºåˆ¶
- è¿æ¥çŠ¶æ€æŒ‡ç¤º
- ä¼˜é›…å¤„ç†è¿æ¥æ–­å¼€

#### 4.2.3 æ‰§è¡Œæµåˆ—è¡¨ (P0)

**åŠŸèƒ½æè¿°**:
ä»¥åˆ—è¡¨å½¢å¼å±•ç¤ºæ‰§è¡Œäº‹ä»¶ï¼Œæ–°äº‹ä»¶ä»åº•éƒ¨è¿½åŠ ã€‚

**åˆ—è¡¨é¡¹ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“  Interview Agent                              2s ago    â”‚
â”‚      æ”¶é›†äº†ç”¨æˆ·éœ€æ±‚: æ´»åŠ¨æŠ¥åé¡µé¢, éœ€è¦å§“å/æ‰‹æœº/éƒ¨é—¨å­—æ®µ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â–¶  Generation Agent                            è¿›è¡Œä¸­     â”‚
â”‚      æ­£åœ¨ç”Ÿæˆé¡µé¢ç»“æ„... (40%)                              â”‚
â”‚      â””â”€ ğŸ”§ filesystem.write: index.html                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®éœ€æ±‚**:
- æ–°äº‹ä»¶è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
- ç”¨æˆ·æ‰‹åŠ¨æ»šåŠ¨æ—¶æš‚åœè‡ªåŠ¨æ»šåŠ¨
- æ”¯æŒå±•å¼€/æŠ˜å è¯¦æƒ…

#### 4.2.4 çŠ¶æ€æ¸²æŸ“ (P0)

**åŠŸèƒ½æè¿°**:
æ ¹æ®äº‹ä»¶çŠ¶æ€æ¸²æŸ“ä¸åŒçš„è§†è§‰æ ·å¼ã€‚

**çŠ¶æ€å®šä¹‰**:

| çŠ¶æ€ | å›¾æ ‡ | é¢œè‰² | è¯´æ˜ |
|------|------|------|------|
| `pending` | â—‹ | ç°è‰² | ç­‰å¾…æ‰§è¡Œ |
| `in_progress` | â–¶ (åŠ¨ç”») | è“è‰² | æ­£åœ¨æ‰§è¡Œ |
| `done` | âœ“ | ç»¿è‰² | æ‰§è¡Œå®Œæˆ |
| `failed` | âœ— | çº¢è‰² | æ‰§è¡Œå¤±è´¥ |
| `blocked` | â¸ | æ©™è‰² | è¢«é˜»å¡ |
| `skipped` | â­ | ç°è‰² | å·²è·³è¿‡ |
| `retrying` | â†» | è“è‰² | è‡ªåŠ¨é‡è¯•ä¸­ |
| `aborted` | â¹ | ç°è‰² | å·²ç»ˆæ­¢ |

#### 4.2.5 äº‹ä»¶æŠ˜å  (P1)

**åŠŸèƒ½æè¿°**:
å®Œæˆçš„äº‹ä»¶è‡ªåŠ¨æŠ˜å æˆä¸€è¡Œæ‘˜è¦ï¼Œå¯ç‚¹å‡»å±•å¼€ã€‚

**æŠ˜å å‰**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“  Interview Agent                              å®Œæˆ      â”‚
â”‚      é—®é¢˜ 1: é¡µé¢ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ                               â”‚
â”‚      å›ç­”: æ´»åŠ¨æŠ¥åé¡µé¢                                     â”‚
â”‚      é—®é¢˜ 2: éœ€è¦æ”¶é›†å“ªäº›ä¿¡æ¯ï¼Ÿ                             â”‚
â”‚      å›ç­”: å§“åã€æ‰‹æœºã€éƒ¨é—¨                                 â”‚
â”‚      é—®é¢˜ 3: æœ‰äººæ•°é™åˆ¶å—ï¼Ÿ                                 â”‚
â”‚      å›ç­”: é™åˆ¶ 200 äºº                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æŠ˜å å**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ“  Interview Agent - æ”¶é›†äº† 3 ä¸ªéœ€æ±‚ä¿¡æ¯        [å±•å¼€ â–¼]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2.6 é”™è¯¯æç¤ºå¡ (P1)

**åŠŸèƒ½æè¿°**:
ç½‘ç»œé”™è¯¯ã€æœåŠ¡ç«¯é”™è¯¯ç­‰å¼‚å¸¸æƒ…å†µçš„å‹å¥½æç¤ºã€‚

**é”™è¯¯ç±»å‹**:

| é”™è¯¯ç±»å‹ | æç¤ºå†…å®¹ | æ“ä½œé€‰é¡¹ |
|----------|----------|----------|
| ç½‘ç»œæ–­å¼€ | "ç½‘ç»œè¿æ¥å·²æ–­å¼€" | [é‡æ–°è¿æ¥] |
| æœåŠ¡ç«¯ 500 | "æœåŠ¡å™¨å¼€å°å·®äº†" | [é‡è¯•] |
| è¯·æ±‚è¶…æ—¶ | "è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•" | [é‡è¯•] |
| API é™æµ | "è¯·æ±‚å¤ªé¢‘ç¹ï¼Œè¯·ç¨å" | [ç­‰å¾…åè‡ªåŠ¨é‡è¯•] |

### 4.3 é˜¶æ®µ 2: Planner + Todo é¢æ¿

#### 4.3.1 Planner é€»è¾‘ (P0)

**åŠŸèƒ½æè¿°**:
AI åˆ†æç”¨æˆ·éœ€æ±‚ï¼Œç”Ÿæˆç»“æ„åŒ–çš„æ‰§è¡Œè®¡åˆ’ã€‚

**Planner ä½ç½®**:
Planner æ˜¯ Orchestrator çš„ç¬¬ä¸€æ­¥ï¼Œä¸æ˜¯ç‹¬ç«‹ Agentã€‚

```
ç”¨æˆ·è¾“å…¥
    â†“
Orchestrator.plan()  â† Planner åœ¨è¿™é‡Œ
    â†“
ç”Ÿæˆ Plan {goal, tasks[]}
    â†“
Orchestrator.execute(plan)
    â†“
å¹¶è¡Œ/ä¸²è¡Œæ‰§è¡Œ Tasks
```

**Plan æ•°æ®ç»“æ„**:
```typescript
interface Plan {
  id: string;
  goal: string;           // ç”¨æˆ·çš„ç›®æ ‡æè¿°
  tasks: Task[];
  created_at: string;
}

interface Task {
  id: string;
  title: string;          // ä»»åŠ¡æ ‡é¢˜
  description?: string;   // ä»»åŠ¡è¯¦ç»†æè¿°
  depends_on?: string[];  // ä¾èµ–çš„ task_id åˆ—è¡¨
  can_parallel: boolean;  // æ˜¯å¦å¯ä»¥å¹¶è¡Œæ‰§è¡Œ
  status: TaskStatus;
  agent_type?: string;    // æ‰§è¡Œæ­¤ä»»åŠ¡çš„ Agent ç±»å‹
  progress?: number;      // 0-100
}

type TaskStatus =
  | 'pending'
  | 'in_progress'
  | 'retrying'
  | 'done'
  | 'failed'
  | 'blocked'
  | 'skipped'
  | 'aborted';
```

**Planner è¾“å…¥è¾“å‡º**:

```
è¾“å…¥:
- ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€éœ€æ±‚
- å½“å‰ä¼šè¯ä¸Šä¸‹æ–‡ (å¦‚æœæœ‰)

è¾“å‡º:
- Plan å¯¹è±¡
- åŒ…å« 5-15 ä¸ª Tasks
- æ ‡æ³¨ä¾èµ–å…³ç³»
```

**Planner æ¨¡å‹é€‰æ‹©**:
- æ”¯æŒå¤šç§ LLM: Claude, GPT, Kimi ç­‰
- é€šè¿‡é…ç½®åˆ‡æ¢
- é»˜è®¤ä½¿ç”¨æˆæœ¬è¾ƒä½çš„æ¨¡å‹ (å¦‚ GPT-4o-mini)

#### 4.3.2 Todo é¢æ¿ (P0)

**åŠŸèƒ½æè¿°**:
å·¦ä¾§æ˜¾ç¤ºä»»åŠ¡åˆ—è¡¨ï¼Œéšæ‰§è¡Œè¿›åº¦è‡ªåŠ¨æ›´æ–°çŠ¶æ€ã€‚

**UI è®¾è®¡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ“‹ Plan       â”‚
â”‚                 â”‚
â”‚  Goal: ç”Ÿæˆ...  â”‚
â”‚                 â”‚
â”‚  â˜‘ åˆ†æéœ€æ±‚     â”‚  â† å®Œæˆ: ç°è‰² + åˆ’çº¿
â”‚  â˜‘ æ”¶é›†ä¿¡æ¯     â”‚
â”‚  â–¶ ç”Ÿæˆéª¨æ¶     â”‚  â† è¿›è¡Œä¸­: è“è‰² + åŠ¨ç”»
â”‚  â˜ æ·»åŠ æ ·å¼     â”‚  â† ç­‰å¾…: é»˜è®¤æ ·å¼
â”‚  â˜ æ·»åŠ äº¤äº’     â”‚
â”‚  â¸ ç»Ÿä¸€ä¼˜åŒ–     â”‚  â† é˜»å¡: æ©™è‰²
â”‚  â˜ å¯¼å‡ºæ–‡ä»¶     â”‚
â”‚                 â”‚
â”‚  è¿›åº¦: 3/7      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€æ ·å¼**:

| çŠ¶æ€ | å›¾æ ‡ | æ–‡å­—æ ·å¼ | èƒŒæ™¯ |
|------|------|----------|------|
| pending | â˜ | æ­£å¸¸ | æ—  |
| in_progress | â–¶ | åŠ ç²— | æµ…è“ |
| done | â˜‘ | ç°è‰² + åˆ’çº¿ | æ—  |
| failed | âœ— | çº¢è‰² | æµ…çº¢ |
| blocked | â¸ | æ©™è‰² | æµ…æ©™ |
| skipped | â­ | ç°è‰² + åˆ’çº¿ | æ—  |
| retrying | â†» | è“è‰² | æµ…è“ |
| aborted | â¹ | ç°è‰² + åˆ’çº¿ | æ—  |

#### 4.3.3 Task å¡ç‰‡è§†å›¾ (P0)

**åŠŸèƒ½æè¿°**:
æ¯ä¸ª Task ä»¥ç‹¬ç«‹å¡ç‰‡å½¢å¼å±•ç¤ºï¼ŒåŒ…å« Agent å’Œ Tool ä¿¡æ¯ã€‚

**å¡ç‰‡ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Task 1: ç”Ÿæˆé¦–é¡µ                                 [â–¶ 60%]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¤– Agents:                                                  â”‚
â”‚    â””â”€ Generation Agent #1 - æ­£åœ¨æ·»åŠ æ ·å¼...                 â”‚
â”‚                                                             â”‚
â”‚ ğŸ”§ Tools:                                                   â”‚
â”‚    â””â”€ filesystem.write: index.html                          â”‚
â”‚                                                             â”‚
â”‚ ğŸ“œ æ—¥å¿—: (æœ€è¿‘ 3 æ¡)                                        â”‚
â”‚    14:23:01 å¼€å§‹ç”Ÿæˆé¡µé¢ç»“æ„                                â”‚
â”‚    14:23:05 é¡µé¢ç»“æ„å®Œæˆ                                    â”‚
â”‚    14:23:06 å¼€å§‹æ·»åŠ æ ·å¼                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¡ç‰‡çŠ¶æ€**:
- è¿›è¡Œä¸­: è“è‰²è¾¹æ¡† + è¿›åº¦æ¡
- å®Œæˆ: ç»¿è‰²è¾¹æ¡† + æŠ˜å 
- å¤±è´¥: çº¢è‰²è¾¹æ¡† + æ“ä½œæŒ‰é’®
- é˜»å¡: æ©™è‰²è¾¹æ¡† + ä¾èµ–æç¤º

#### 4.3.4 å¹¶è¡Œæ‰§è¡Œå¼•æ“ (P0)

**åŠŸèƒ½æè¿°**:
æ”¯æŒæœ€å¤š 5 ä¸ª Agent åŒæ—¶æ‰§è¡Œã€‚

**å¹¶è¡Œæ§åˆ¶**:
```python
class ParallelExecutor:
    max_concurrent: int = 5

    async def execute(self, plan: Plan):
        # 1. æ‰¾å‡ºæ‰€æœ‰å¯æ‰§è¡Œçš„ Task (æ— ä¾èµ–æˆ–ä¾èµ–å·²å®Œæˆ)
        # 2. å–å‰ N ä¸ª (N = min(å¯æ‰§è¡Œæ•°, max_concurrent - å½“å‰è¿è¡Œæ•°))
        # 3. å¹¶è¡Œå¯åŠ¨è¿™äº› Task
        # 4. ç›‘å¬å®Œæˆäº‹ä»¶ï¼Œæ›´æ–°ä¾èµ–å›¾
        # 5. é‡å¤ç›´åˆ°æ‰€æœ‰ Task å®Œæˆ
```

**ä¾èµ–å¤„ç†**:
```
Task A (æ— ä¾èµ–) â”€â”€â”
                  â”œâ”€â”€â–¶ Task D (ä¾èµ– A, B)
Task B (æ— ä¾èµ–) â”€â”€â”˜

Task C (æ— ä¾èµ–) â”€â”€â”€â”€â”€â”€â–¶ Task E (ä¾èµ– C)
```

- A, B, C å¯ä»¥å¹¶è¡Œæ‰§è¡Œ
- D ç­‰å¾… A, B éƒ½å®Œæˆåæ‰§è¡Œ
- E ç­‰å¾… C å®Œæˆåæ‰§è¡Œ

#### 4.3.5 å¤±è´¥å¤„ç† (P1)

**åŠŸèƒ½æè¿°**:
åˆ†å±‚å¤„ç†æ‰§è¡Œå¤±è´¥ï¼Œæœ€å¤§åŒ–å®Œæˆåº¦ã€‚

**ä¸‰å±‚å¤„ç†æœºåˆ¶**:

**Layer 1: è‡ªåŠ¨é‡è¯• (å¯¹ç”¨æˆ·é€æ˜)**
```
è§¦å‘æ¡ä»¶: API è¶…æ—¶ã€ç½‘ç»œé”™è¯¯ã€429 é™æµ
é‡è¯•ç­–ç•¥: 3 æ¬¡ï¼ŒæŒ‡æ•°é€€é¿ (1s â†’ 2s â†’ 4s)
ç”¨æˆ·æ„ŸçŸ¥: åªçœ‹åˆ° "æ­£åœ¨é‡è¯•..." æç¤º
```

**Layer 2: ä¼˜é›…é™çº§**
```
è§¦å‘æ¡ä»¶: é‡è¯• 3 æ¬¡åä»å¤±è´¥
è¡Œä¸º:
  - å½“å‰ Task æ ‡è®°ä¸º failed
  - ä¸ä¾èµ–å®ƒçš„ Task ç»§ç»­æ‰§è¡Œ
  - ä¾èµ–å®ƒçš„ Task è¿›å…¥ blocked çŠ¶æ€
```

**Layer 3: ç”¨æˆ·å†³ç­–**
```
é€‰é¡¹:
  [é‡è¯•æ­¤ä»»åŠ¡] - é‡æ–°æ‰§è¡Œå¤±è´¥çš„ Task
  [è·³è¿‡æ­¤ä»»åŠ¡] - æ ‡è®°ä¸º skippedï¼Œè§£é™¤ä¸‹æ¸¸é˜»å¡
  [ä¿®æ”¹éœ€æ±‚åé‡è¯•] - æ‰“å¼€ç¼–è¾‘æ¡†ä¿®æ”¹éœ€æ±‚
  [ç»ˆæ­¢å…¨éƒ¨] - åœæ­¢æ‰€æœ‰æ‰§è¡Œï¼Œä¿ç•™å·²å®Œæˆçš„ç»“æœ
```

ç»ˆæ­¢è¯­ä¹‰: æœªå®Œæˆçš„ Task æ ‡è®°ä¸º `aborted`ï¼Œå·²å®Œæˆç»“æœä¿æŒ `done`ã€‚

**Task çŠ¶æ€æœº**:
```
pending â”€â”€â–¶ in_progress â”€â”€â–¶ done
                â”‚
                â–¼
            retrying (1/3) â”€â”€â–¶ retrying (2/3) â”€â”€â–¶ retrying (3/3)
                                                        â”‚
                                                        â–¼
                                                    failed
                                                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼               â–¼                   â–¼               â–¼
              [ç”¨æˆ·é‡è¯•]      [ç”¨æˆ·è·³è¿‡]          [ç”¨æˆ·ä¿®æ”¹]      [ç”¨æˆ·ç»ˆæ­¢]
                    â”‚               â”‚                   â”‚               â”‚
                    â–¼               â–¼                   â–¼               â–¼
              in_progress       skipped           in_progress       aborted
```

---

## 5. äº¤äº’è®¾è®¡

### 5.1 é¡µé¢å¸ƒå±€

**é˜¶æ®µ 1 å¸ƒå±€ (ç®€å•ç‰ˆ)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜• Instant Coffee                              [æ–°ä¼šè¯]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                                                             â”‚
â”‚                     æ‰§è¡Œæµåˆ—è¡¨                               â”‚
â”‚                     (äº‹ä»¶é€æ¡æ˜¾ç¤º)                           â”‚
â”‚                                                             â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [è¾“å…¥æ¡†...]                                      [å‘é€]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é˜¶æ®µ 2 å¸ƒå±€ (å®Œæ•´ç‰ˆ)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜• Instant Coffee                              [æ–°ä¼šè¯]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   ğŸ“‹ Todo       â”‚  â”‚   ğŸ“œ Task å¡ç‰‡åŒºåŸŸ                 â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚                                   â”‚ â”‚
â”‚  â”‚  â˜‘ åˆ†æéœ€æ±‚     â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  â˜‘ æ”¶é›†ä¿¡æ¯     â”‚  â”‚  â”‚ Task 1: ç”Ÿæˆé¦–é¡µ    [â–¶ 60%]  â”‚â”‚ â”‚
â”‚  â”‚  â–¶ ç”Ÿæˆé¦–é¡µ     â”‚  â”‚  â”‚ ğŸ¤– Generation Agent           â”‚â”‚ â”‚
â”‚  â”‚  â–¶ ç”Ÿæˆè¯¦æƒ…é¡µ   â”‚  â”‚  â”‚ â””â”€ æ­£åœ¨æ·»åŠ æ ·å¼...            â”‚â”‚ â”‚
â”‚  â”‚  â˜ ç»Ÿä¸€ä¼˜åŒ–     â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â”‚  â˜ å¯¼å‡ºæ–‡ä»¶     â”‚  â”‚                                   â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  è¿›åº¦: 2/6      â”‚  â”‚  â”‚ Task 2: ç”Ÿæˆè¯¦æƒ…é¡µ  [â–¶ 40%]  â”‚â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚  â”‚ ğŸ¤– Generation Agent           â”‚â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â””â”€ æ­£åœ¨ç”Ÿæˆç»“æ„...            â”‚â”‚ â”‚
â”‚                       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚                       â”‚                                   â”‚ â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [è¾“å…¥æ¡†...]                                      [å‘é€]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å“åº”å¼è®¾è®¡

**æ¡Œé¢ç«¯ (>= 1024px)**:
- å·¦ä¾§ Todo é¢æ¿ (250px å›ºå®šå®½åº¦)
- å³ä¾§ Task å¡ç‰‡åŒºåŸŸ (è‡ªé€‚åº”)
- åº•éƒ¨è¾“å…¥æ¡†

**å¹³æ¿ç«¯ (768px - 1023px)**:
- Todo é¢æ¿å¯æŠ˜å 
- Task å¡ç‰‡å•åˆ—æ˜¾ç¤º

**ç§»åŠ¨ç«¯ (< 768px)**:
- Todo é¢æ¿é»˜è®¤éšè—ï¼Œç‚¹å‡»å±•å¼€
- Task å¡ç‰‡å…¨å®½æ˜¾ç¤º
- è¾“å…¥æ¡†å›ºå®šåœ¨åº•éƒ¨

### 5.3 äº¤äº’æµç¨‹

**åŸºç¡€æµç¨‹**:
```
ç”¨æˆ·è¾“å…¥éœ€æ±‚
    â†“
æ˜¾ç¤º "æ­£åœ¨åˆ†æ..."
    â†“
Planner ç”Ÿæˆ Plan
    â†“
æ˜¾ç¤º Todo é¢æ¿ + ç©º Task å¡ç‰‡
    â†“
å¼€å§‹æ‰§è¡Œ Tasks
    â†“
å®æ—¶æ›´æ–° Todo çŠ¶æ€ + Task å¡ç‰‡å†…å®¹
    â†“
å…¨éƒ¨å®Œæˆï¼Œæ˜¾ç¤ºç»“æœ
```

**å¤±è´¥å¤„ç†æµç¨‹**:
```
Task æ‰§è¡Œå¤±è´¥
    â†“
æ˜¾ç¤ºé‡è¯•æç¤º (1/3, 2/3, 3/3)
    â†“
é‡è¯•ä»å¤±è´¥
    â†“
Task å¡ç‰‡å˜çº¢ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
    â†“
å¼¹å‡ºæ“ä½œé€‰é¡¹
    â†“
ç”¨æˆ·é€‰æ‹©: é‡è¯• / è·³è¿‡ / ä¿®æ”¹ / ç»ˆæ­¢
    â†“
æ‰§è¡Œç”¨æˆ·é€‰æ‹©
```

### 5.4 åŠ¨ç”»æ•ˆæœ

| åœºæ™¯ | åŠ¨ç”» | æ—¶é•¿ |
|------|------|------|
| æ–°äº‹ä»¶å‡ºç° | ä»ä¸‹æ–¹æ»‘å…¥ + æ·¡å…¥ | 200ms |
| äº‹ä»¶æŠ˜å  | é«˜åº¦æ”¶ç¼© + æ·¡å‡ºè¯¦æƒ… | 300ms |
| Task çŠ¶æ€å˜åŒ– | å›¾æ ‡æ—‹è½¬/å˜è‰² | 150ms |
| è¿›åº¦æ¡æ›´æ–° | å¹³æ»‘è¿‡æ¸¡ | 100ms |
| é”™è¯¯å¡ç‰‡å‡ºç° | æŠ–åŠ¨ + çº¢è‰²é—ªçƒ | 300ms |

---

## 6. æŠ€æœ¯çº¦æŸ

### 6.1 å‰ç«¯æŠ€æœ¯æ ˆ

**æ¡†æ¶é€‰æ‹©**: React + TypeScript (æ¨è)

**ç†ç”±**:
- ç»„ä»¶åŒ–å¼€å‘ï¼Œæ˜“äºç»´æŠ¤
- TypeScript ç±»å‹å®‰å…¨
- ç”Ÿæ€ä¸°å¯Œï¼ŒSSE æ”¯æŒå¥½
- å›¢é˜Ÿç†Ÿæ‚‰åº¦é«˜

**å¤‡é€‰æ–¹æ¡ˆ**:
- Vue 3 + TypeScript
- çº¯ HTML + Vanilla JS (æœ€å°ä¾èµ–)

**ä¾èµ–**:
```json
{
  "dependencies": {
    "react": "^19.x",
    "react-dom": "^19.x",
    "typescript": "^5.x",
    "tailwindcss": "^4.x",
    "lucide-react": "^0.x"
  }
}
```

### 6.2 åç«¯æ‰©å±•

**æ–°å¢ API ç«¯ç‚¹**:

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/chat/stream` | GET (SSE) | æµå¼äº‹ä»¶æ¨é€ |
| `/api/plan` | POST | ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ |
| `/api/task/{id}/retry` | POST | é‡è¯•å¤±è´¥ä»»åŠ¡ |
| `/api/task/{id}/skip` | POST | è·³è¿‡ä»»åŠ¡ |
| `/api/task/{id}/modify` | POST | ä¿®æ”¹ä»»åŠ¡æè¿°å¹¶é‡è¯• |
| `/api/task/{id}/status` | GET | è·å–ä»»åŠ¡çŠ¶æ€ |
| `/api/plan/{id}/status` | GET | è·å–è®¡åˆ’çŠ¶æ€æ±‡æ€» |
| `/api/session/{id}/abort` | POST | ç»ˆæ­¢æ‰§è¡Œ |

**Orchestrator æ‰©å±•**:
```python
class Orchestrator:
    # æ–°å¢æ–¹æ³•
    async def plan(self, user_message: str) -> Plan:
        """ç”Ÿæˆæ‰§è¡Œè®¡åˆ’"""
        pass

    async def execute_parallel(self, plan: Plan) -> AsyncGenerator[Event, None]:
        """å¹¶è¡Œæ‰§è¡Œè®¡åˆ’"""
        pass

    async def retry_task(self, task_id: str) -> None:
        """é‡è¯•å¤±è´¥ä»»åŠ¡"""
        pass

    async def skip_task(self, task_id: str) -> None:
        """è·³è¿‡ä»»åŠ¡"""
        pass

    async def abort(self) -> None:
        """ç»ˆæ­¢æ‰§è¡Œ"""
        pass
```

è¯´æ˜: ä¸Šè¿° Orchestrator æ‰©å±•ä¸ºæ¦‚å¿µæ¥å£ã€‚å½“å‰å®ç°å°†ä»»åŠ¡æ§åˆ¶ä¸‹æ²‰åˆ°
TaskService + Task æ§åˆ¶ APIï¼Œå¹¶é€šè¿‡ ExecutorManager/ParallelExecutor
ä¸æ‰§è¡Œä¸­çš„ä»»åŠ¡è§£è€¦åä½œï¼›Orchestrator ä¸“æ³¨äº plan ç”Ÿæˆä¸æ‰§è¡Œæµç¼–æ’ã€‚

### 6.3 Planner æ¨¡å‹é…ç½®

**æ”¯æŒçš„æ¨¡å‹**:

| æ¨¡å‹ | æä¾›å•† | æˆæœ¬ | æ¨èåœºæ™¯ |
|------|--------|------|----------|
| GPT-4o-mini | OpenAI | ä½ | é»˜è®¤ Planner |
| Claude Haiku | Anthropic | ä½ | å¤‡é€‰ |
| Kimi | Moonshot | ä½ | ä¸­æ–‡ä¼˜åŒ– |
| GPT-4o | OpenAI | ä¸­ | å¤æ‚ä»»åŠ¡ |
| Claude Sonnet | Anthropic | ä¸­ | å¤æ‚ä»»åŠ¡ |

**é…ç½®æ–¹å¼**:
```python
# config.py
PLANNER_MODEL = os.getenv("PLANNER_MODEL", "gpt-4o-mini")
PLANNER_PROVIDER = os.getenv("PLANNER_PROVIDER", "openai")
```

### 6.4 å¹¶è¡Œæ‰§è¡Œçº¦æŸ

| çº¦æŸ | å€¼ | è¯´æ˜ |
|------|-----|------|
| æœ€å¤§å¹¶è¡Œ Agent æ•° | 5 | é˜²æ­¢èµ„æºè€—å°½ |
| å• Task æœ€å¤§é‡è¯•æ¬¡æ•° | 3 | é¿å…æ— é™é‡è¯• |
| é‡è¯•é—´éš” | 1s, 2s, 4s | æŒ‡æ•°é€€é¿ |
| Task è¶…æ—¶æ—¶é—´ | 180s | å•ä¸ª Task æœ€é•¿æ‰§è¡Œæ—¶é—´ |
| Plan æœ€å¤§ Task æ•° | 20 | é˜²æ­¢è®¡åˆ’è¿‡äºå¤æ‚ |

---

## 7. äº‹ä»¶åè®®

### 7.1 äº‹ä»¶ç±»å‹æ€»è§ˆ

| äº‹ä»¶ç±»å‹ | è¯´æ˜ | é˜¶æ®µ |
|----------|------|------|
| `plan_created` | Plan ç”Ÿæˆå®Œæˆ | 2 |
| `plan_updated` | Plan æ›´æ–° (å¦‚è·³è¿‡ä»»åŠ¡) | 2 |
| `task_started` | Task å¼€å§‹æ‰§è¡Œ | 2 |
| `task_progress` | Task è¿›åº¦æ›´æ–° | 2 |
| `task_done` | Task å®Œæˆ | 2 |
| `task_failed` | Task å¤±è´¥ | 2 |
| `task_retrying` | Task é‡è¯•ä¸­ | 2 |
| `task_skipped` | Task è¢«è·³è¿‡ | 2 |
| `task_blocked` | Task è¢«é˜»å¡ | 2 |
| `agent_start` | Agent å¯åŠ¨ | 1 |
| `agent_progress` | Agent è¿›åº¦ | 1 |
| `agent_end` | Agent ç»“æŸ | 1 |
| `tool_call` | Tool è°ƒç”¨ | 1 |
| `tool_result` | Tool è¿”å› | 1 |
| `error` | å…¨å±€é”™è¯¯ | 1 |
| `done` | å…¨éƒ¨å®Œæˆ | 1 |

### 7.2 äº‹ä»¶æ•°æ®ç»“æ„

**åŸºç¡€äº‹ä»¶**:
```typescript
interface BaseEvent {
  type: string;
  timestamp: string;  // ISO-8601
}
```

**Plan äº‹ä»¶**:
```typescript
interface PlanCreatedEvent extends BaseEvent {
  type: 'plan_created';
  plan: {
    id: string;
    goal: string;
    tasks: Array<{
      id: string;
      title: string;
      description?: string;
      depends_on?: string[];
      can_parallel: boolean;
      status: TaskStatus;
      agent_type?: string;
    }>;
  };
}

interface PlanUpdatedEvent extends BaseEvent {
  type: 'plan_updated';
  plan_id: string;
  changes: Array<{
    task_id: string;
    field: string;
    old_value: any;
    new_value: any;
  }>;
}
```

**Task äº‹ä»¶**:
```typescript
interface TaskStartedEvent extends BaseEvent {
  type: 'task_started';
  task_id: string;
  task_title: string;
}

interface TaskProgressEvent extends BaseEvent {
  type: 'task_progress';
  task_id: string;
  progress: number;  // 0-100
  message?: string;
}

interface TaskDoneEvent extends BaseEvent {
  type: 'task_done';
  task_id: string;
  result?: {
    output_file?: string;
    preview_url?: string;
    summary?: string;
  };
}

interface TaskFailedEvent extends BaseEvent {
  type: 'task_failed';
  task_id: string;
  error_type: 'temporary' | 'logic' | 'dependency';
  error_message: string;
  retry_count: number;
  max_retries: number;
  available_actions: Array<'retry' | 'skip' | 'modify' | 'abort'>;
  blocked_tasks: string[];
}

interface TaskRetryingEvent extends BaseEvent {
  type: 'task_retrying';
  task_id: string;
  attempt: number;
  max_attempts: number;
  next_retry_in: number;  // ç§’
}
```

**Agent äº‹ä»¶**:
```typescript
interface AgentStartEvent extends BaseEvent {
  type: 'agent_start';
  task_id: string;
  agent_id: string;
  agent_type: 'Planner' | 'Interview' | 'Generation' | 'Refinement' | string;
  agent_instance?: number;  // åŒç±»å‹å¤šå®ä¾‹æ—¶çš„ç¼–å·
}

interface AgentProgressEvent extends BaseEvent {
  type: 'agent_progress';
  task_id: string;
  agent_id: string;
  message: string;
  progress?: number;
}

interface AgentEndEvent extends BaseEvent {
  type: 'agent_end';
  task_id: string;
  agent_id: string;
  status: 'success' | 'failed';
  summary?: string;
}
```

**Tool äº‹ä»¶**:
```typescript
interface ToolCallEvent extends BaseEvent {
  type: 'tool_call';
  task_id: string;
  agent_id: string;
  tool_name: string;
  tool_input?: Record<string, any>;
}

interface ToolResultEvent extends BaseEvent {
  type: 'tool_result';
  task_id: string;
  agent_id: string;
  tool_name: string;
  success: boolean;
  tool_output?: Record<string, any>;
  error?: string;
}
```

### 7.3 SSE æ¶ˆæ¯æ ¼å¼

```
data: {"type":"plan_created","timestamp":"2025-01-30T14:23:01Z","plan":{...}}

data: {"type":"task_started","timestamp":"2025-01-30T14:23:02Z","task_id":"task_1",...}

data: {"type":"agent_start","timestamp":"2025-01-30T14:23:02Z","task_id":"task_1","agent_id":"gen_1",...}

data: {"type":"agent_progress","timestamp":"2025-01-30T14:23:05Z","task_id":"task_1","agent_id":"gen_1","progress":40,...}

data: {"type":"tool_call","timestamp":"2025-01-30T14:23:06Z","task_id":"task_1","agent_id":"gen_1","tool_name":"filesystem.write",...}

data: [DONE]
```

---

## 8. æ€§èƒ½æŒ‡æ ‡

### 8.1 å“åº”æ—¶é—´

| æ“ä½œ | ç›®æ ‡æ—¶é—´ | è¯´æ˜ |
|------|---------|------|
| é¡µé¢åŠ è½½ | < 2s | é¦–å±æ¸²æŸ“æ—¶é—´ |
| Plan ç”Ÿæˆ | < 5s | Planner å“åº”æ—¶é—´ |
| é¦–ä¸ªäº‹ä»¶ | < 3s | ç”¨æˆ·è¾“å…¥åé¦–ä¸ªäº‹ä»¶åˆ°è¾¾ |
| äº‹ä»¶å»¶è¿Ÿ | < 500ms | SSE äº‹ä»¶ä¼ è¾“å»¶è¿Ÿ |
| UI æ›´æ–° | < 100ms | äº‹ä»¶åˆ° UI æ¸²æŸ“æ—¶é—´ |

### 8.2 å¹¶è¡Œæ•ˆç‡

| æŒ‡æ ‡ | ç›®æ ‡ | è¯´æ˜ |
|------|------|------|
| å¹¶è¡Œåˆ©ç”¨ç‡ | > 80% | å¯å¹¶è¡Œä»»åŠ¡å®é™…å¹¶è¡Œæ‰§è¡Œçš„æ¯”ä¾‹ |
| èµ„æºåˆ©ç”¨ç‡ | < 70% | CPU/å†…å­˜ä½¿ç”¨ç‡ |
| ä»»åŠ¡ååé‡ | 5 tasks/min | å¹³å‡ä»»åŠ¡å®Œæˆé€Ÿåº¦ |

### 8.3 å¯é æ€§

| æŒ‡æ ‡ | ç›®æ ‡ | è¯´æ˜ |
|------|------|------|
| è‡ªåŠ¨é‡è¯•æˆåŠŸç‡ | > 90% | ä¸´æ—¶é”™è¯¯è‡ªåŠ¨æ¢å¤ç‡ |
| ä»»åŠ¡å®Œæˆç‡ | > 95% | ä¸å«ç”¨æˆ·ä¸»åŠ¨å–æ¶ˆ |
| SSE è¿æ¥ç¨³å®šæ€§ | > 99% | è¿æ¥ä¿æŒç‡ |

---

## 9. æœªæ¥è§„åˆ’

### 9.1 é˜¶æ®µ 3: é«˜çº§åŠŸèƒ½ (æœªæ¥)

**ä¼šè¯ç®¡ç†**:
- å·¦ä¾§ä¼šè¯åˆ—è¡¨
- ä¼šè¯æœç´¢å’Œç­›é€‰
- ä¼šè¯å¯¼å‡º/å¯¼å…¥

**åä½œåŠŸèƒ½**:
- åˆ†äº«æ‰§è¡Œé“¾æ¥
- å®æ—¶åä½œç¼–è¾‘
- è¯„è®ºå’Œåé¦ˆ

**æ¨¡æ¿ç³»ç»Ÿ**:
- é¢„è®¾ä»»åŠ¡æ¨¡æ¿
- è‡ªå®šä¹‰ Agent ç»„åˆ
- å·¥ä½œæµä¿å­˜å’Œå¤ç”¨

### 9.2 é˜¶æ®µ 4: ä¼ä¸šåŠŸèƒ½ (æœªæ¥)

**ç”¨æˆ·ç³»ç»Ÿ**:
- ç™»å½•/æ³¨å†Œ
- å›¢é˜Ÿç®¡ç†
- æƒé™æ§åˆ¶

**ç›‘æ§å’Œåˆ†æ**:
- æ‰§è¡Œå†å²åˆ†æ
- æˆæœ¬ç»Ÿè®¡
- æ€§èƒ½ç›‘æ§

**é›†æˆ**:
- API å¼€æ”¾
- Webhook é€šçŸ¥
- ç¬¬ä¸‰æ–¹é›†æˆ

---

## é™„å½•

### A. Planner Prompt æ¨¡æ¿

```
ä½ æ˜¯ Instant Coffee çš„ Plannerï¼Œè´Ÿè´£åˆ†æç”¨æˆ·éœ€æ±‚å¹¶ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ã€‚

ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1. ç†è§£ç”¨æˆ·çš„éœ€æ±‚
2. å°†éœ€æ±‚æ‹†è§£ä¸º 5-15 ä¸ªå¯æ‰§è¡Œçš„ Tasks
3. æ ‡æ³¨ Task ä¹‹é—´çš„ä¾èµ–å…³ç³»
4. æ ‡æ³¨å“ªäº› Task å¯ä»¥å¹¶è¡Œæ‰§è¡Œ

è¾“å‡ºæ ¼å¼ (JSON):
{
  "goal": "ç”¨æˆ·ç›®æ ‡çš„ç®€çŸ­æè¿°",
  "tasks": [
    {
      "id": "task_1",
      "title": "ä»»åŠ¡æ ‡é¢˜",
      "description": "ä»»åŠ¡è¯¦ç»†æè¿°",
      "depends_on": [],
      "can_parallel": true,
      "agent_type": "Interview"
    },
    ...
  ]
}

å¯ç”¨çš„ Agent ç±»å‹:
- Interview: æ”¶é›†ç”¨æˆ·éœ€æ±‚
- Generation: ç”Ÿæˆé¡µé¢
- Refinement: ä¿®æ”¹é¡µé¢
- Validator: éªŒè¯è¾“å‡º
- Export: å¯¼å‡ºæ–‡ä»¶

è§„åˆ™:
1. ç¬¬ä¸€ä¸ª Task é€šå¸¸æ˜¯ Interview (é™¤éç”¨æˆ·éœ€æ±‚å·²ç»éå¸¸æ˜ç¡®)
2. Generation Task å¯ä»¥å¹¶è¡Œæ‰§è¡Œ (å¦‚æœç”Ÿæˆå¤šä¸ªç‹¬ç«‹é¡µé¢)
3. æœ€åä¸€ä¸ª Task é€šå¸¸æ˜¯ Export
4. å¦‚æœæœ‰"ç»Ÿä¸€ä¼˜åŒ–"ç±»çš„ Taskï¼Œå®ƒåº”è¯¥ä¾èµ–æ‰€æœ‰ Generation Task
5. Task æ•°é‡æ§åˆ¶åœ¨ 5-15 ä¸ªï¼Œå¤ªå°‘ä¸å¤Ÿç»†ï¼Œå¤ªå¤šå¤ªå¤æ‚

ç¤ºä¾‹è¾“å…¥: "å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªç”µå•†ç½‘ç«™ï¼ŒåŒ…æ‹¬é¦–é¡µã€å•†å“è¯¦æƒ…é¡µå’Œè´­ç‰©è½¦é¡µé¢"

ç¤ºä¾‹è¾“å‡º:
{
  "goal": "ç”Ÿæˆç”µå•†ç½‘ç«™ (3ä¸ªé¡µé¢)",
  "tasks": [
    {"id": "t1", "title": "åˆ†æéœ€æ±‚", "agent_type": "Interview", "depends_on": [], "can_parallel": false},
    {"id": "t2", "title": "ç”Ÿæˆé¦–é¡µ", "agent_type": "Generation", "depends_on": ["t1"], "can_parallel": true},
    {"id": "t3", "title": "ç”Ÿæˆå•†å“è¯¦æƒ…é¡µ", "agent_type": "Generation", "depends_on": ["t1"], "can_parallel": true},
    {"id": "t4", "title": "ç”Ÿæˆè´­ç‰©è½¦é¡µé¢", "agent_type": "Generation", "depends_on": ["t1"], "can_parallel": true},
    {"id": "t5", "title": "ç»Ÿä¸€æ ·å¼ä¼˜åŒ–", "agent_type": "Refinement", "depends_on": ["t2", "t3", "t4"], "can_parallel": false},
    {"id": "t6", "title": "å¯¼å‡ºæ‰€æœ‰é¡µé¢", "agent_type": "Export", "depends_on": ["t5"], "can_parallel": false}
  ]
}
```

### B. å¼€å‘é˜¶æ®µåˆ’åˆ†

**é˜¶æ®µ 1: æ‰§è¡Œæµå¯è§†åŒ– (MVP)**

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | ä¾èµ– |
|------|--------|------|
| 1.1 åç«¯äº‹ä»¶åè®®æ‰©å±• | P0 | - |
| 1.2 Web å‰ç«¯éª¨æ¶ | P0 | - |
| 1.3 SSE äº‹ä»¶æ¶ˆè´¹ | P0 | 1.1, 1.2 |
| 1.4 æ‰§è¡Œæµåˆ—è¡¨ UI | P0 | 1.3 |
| 1.5 çŠ¶æ€æ¸²æŸ“ | P0 | 1.4 |
| 1.6 äº‹ä»¶æŠ˜å  | P1 | 1.5 |
| 1.7 é”™è¯¯æç¤ºå¡ | P1 | 1.5 |

**é˜¶æ®µ 2: Planner + Todo**

| ä»»åŠ¡ | ä¼˜å…ˆçº§ | ä¾èµ– |
|------|--------|------|
| 2.1 Planner é€»è¾‘ | P0 | 1.x |
| 2.2 Plan äº‹ä»¶åè®® | P0 | 2.1 |
| 2.3 Todo é¢æ¿ UI | P0 | 2.2 |
| 2.4 Task å¡ç‰‡è§†å›¾ | P0 | 2.3 |
| 2.5 å¹¶è¡Œæ‰§è¡Œå¼•æ“ | P0 | 2.1 |
| 2.6 å¤±è´¥å¤„ç† UI | P1 | 2.4, 2.5 |
| 2.7 å–æ¶ˆ/ä¸­æ­¢åŠŸèƒ½ | P2 | 2.6 |

### C. éªŒæ”¶æ ‡å‡† (DoD)

**é˜¶æ®µ 1 éªŒæ”¶**:
- [ ] è¾“å…¥éœ€æ±‚ â†’ å‰ç«¯å®æ—¶æ˜¾ç¤ºæ‰§è¡Œæµäº‹ä»¶
- [ ] äº‹ä»¶æœ‰ in_progress / done / error ä¸‰ç§çŠ¶æ€æ¸²æŸ“
- [ ] å®Œæˆçš„äº‹ä»¶å¯æŠ˜å æˆæ‘˜è¦
- [ ] ç½‘ç»œé”™è¯¯æœ‰å‹å¥½æç¤º
- [ ] ä¸ä¾èµ– CLI èƒ½è·‘é€šå®Œæ•´æµç¨‹

**é˜¶æ®µ 2 éªŒæ”¶**:
- [ ] è¾“å…¥éœ€æ±‚ â†’ å…ˆæ˜¾ç¤º Plan (5-15 ä¸ª Tasks)
- [ ] Todo é¢æ¿éšæ‰§è¡Œè¿›åº¦è‡ªåŠ¨å‹¾é€‰
- [ ] å¤±è´¥çš„ Task æ ‡çº¢ï¼Œæ˜¾ç¤ºæ“ä½œé€‰é¡¹
- [ ] å¤šä¸ª Task å¯ä»¥å¹¶è¡Œæ‰§è¡Œ (æœ€å¤š 5 ä¸ª)
- [ ] ç”¨æˆ·å¯ä»¥é‡è¯•/è·³è¿‡å¤±è´¥çš„ Task
- [ ] æ‰§è¡Œæµäº‹ä»¶èƒ½å…³è”åˆ°å¯¹åº” Task

---

**æ–‡æ¡£ç‰ˆæœ¬**: v0.2
**æœ€åæ›´æ–°**: 2025-01-30
**çŠ¶æ€**: è§„åˆ’ä¸­

---

## æ€»ç»“

æœ¬è§„æ ¼è¯´æ˜ä¹¦å®šä¹‰äº† **Instant Coffee v0.2** çš„æ ¸å¿ƒåŠŸèƒ½ï¼š

**æ ¸å¿ƒå‡çº§**:
1. ğŸŒ Web å‰ç«¯ - æµè§ˆå™¨ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€ CLI
2. ğŸ‘ï¸ æ‰§è¡Œæµå¯è§†åŒ– - å®æ—¶çœ‹è§ AI åœ¨åšä»€ä¹ˆ
3. ğŸ“‹ Planner + Todo - é€æ˜çš„ä»»åŠ¡è§„åˆ’å’Œè¿›åº¦è¿½è¸ª
4. âš¡ å¤š Agent å¹¶è¡Œ - æœ€å¤š 5 ä¸ª Agent åŒæ—¶æ‰§è¡Œ
5. ğŸ›¡ï¸ å¤±è´¥å®¹é”™ - åˆ†å±‚å¤„ç†ï¼Œæœ€å¤§åŒ–å®Œæˆåº¦

**è®¾è®¡ç†å¿µ**:
- é€æ˜åº¦ä¼˜å…ˆ - ç”¨æˆ·éšæ—¶çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆ
- å¹¶è¡Œä¼˜å…ˆ - èƒ½å¹¶è¡Œå°±å¹¶è¡Œï¼Œæå‡æ•ˆç‡
- å®¹é”™ä¼˜å…ˆ - ä¸€ä¸ªå¤±è´¥ä¸å½±å“å…¨å±€
- æ¸è¿›å¢å¼º - å…ˆèƒ½ç”¨ï¼Œå†å¥½ç”¨

**ä¸‹ä¸€æ­¥**: å¼€å§‹é˜¶æ®µ 1 å¼€å‘ (æ‰§è¡Œæµå¯è§†åŒ–)
